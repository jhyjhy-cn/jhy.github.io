<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Flutter GetX 实战&lt;小米商城&gt;</title>
    <link href="/posts/64979/"/>
    <url>/posts/64979/</url>
    
    <content type="html"><![CDATA[<h2 id="安装get-cli"><a href="#安装get-cli" class="headerlink" title="安装get_cli"></a>安装get_cli</h2><p><code>flutter pub global activate get_cli</code></p><p>临时: <code>flutter pub global activate -s git https://github.com/jonataslaw/get_cli</code></p><p>win: <code>安装路径添加进path环境变量</code></p><h2 id="集成"><a href="#集成" class="headerlink" title="集成"></a>集成</h2><p>创建完项目执行<code>get init</code></p><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs vbnet"><span class="hljs-symbol">E:</span>\CoreCode\GS\XDS\xmshop&gt;<span class="hljs-keyword">get</span> init<br>? Which architecture <span class="hljs-keyword">do</span> you want <span class="hljs-keyword">to</span> use? (Use arrow keys)<br>&gt; GetX Pattern (<span class="hljs-keyword">by</span> Kauê)<br>  CLEAN (<span class="hljs-keyword">by</span> Arktekko)<br>? 你的 <span class="hljs-keyword">lib</span> 文件夹不是空的。你确定要覆盖你的应用吗？ <br> 警告:操作不可逆 (Use arrow keys)<br>&gt; 是的!<br>  不<br>✓  <span class="hljs-comment">&#x27;Package: get 已安装！</span><br>✓  文件: main.dart 创建成功，路径: <span class="hljs-keyword">lib</span>\\main.dart<br>✓  文件: home_controller.dart 创建成功，路径: <span class="hljs-keyword">lib</span>\app\modules\home\\controllers\\home_controller.dart<br>✓  文件: home_view.dart 创建成功，路径: <span class="hljs-keyword">lib</span>\app\modules\home\\views\\home_view.dart<br>✓  文件: home_binding.dart 创建成功，路径: <span class="hljs-keyword">lib</span>\app\modules\home\\bindings\\home_binding.dart<br>✓  文件: app_routes.dart 创建成功，路径: <span class="hljs-keyword">lib</span>\\app\\routes\\app_routes.dart<br>✓  文件: app_pages.dart 创建成功，路径: <span class="hljs-keyword">lib</span>\\app\\routes\\app_pages.dart<br>✓  home route 创建成功.<br>✓  Home page 创建成功.<br>✓  GetX 结构生成成功。<br></code></pre></td></tr></table></figure><h3 id="get命令创建页面"><a href="#get命令创建页面" class="headerlink" title="get命令创建页面"></a>get命令创建页面</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">get</span> <span class="hljs-keyword">create</span> page:tabs<br><span class="hljs-keyword">get</span> <span class="hljs-keyword">create</span> page:home<br><span class="hljs-keyword">get</span> <span class="hljs-keyword">create</span> page:category<br><span class="hljs-keyword">get</span> <span class="hljs-keyword">create</span> page:service<br><span class="hljs-keyword">get</span> <span class="hljs-keyword">create</span> page:cart<br><span class="hljs-keyword">get</span> <span class="hljs-keyword">create</span> page:<span class="hljs-keyword">user</span><br><span class="hljs-keyword">get</span> <span class="hljs-keyword">create</span> page:serach<br></code></pre></td></tr></table></figure><h2 id="路由设置"><a href="#路由设置" class="headerlink" title="路由设置"></a>路由设置</h2><ol><li><p>优化页面路由 只留tabs</p></li><li><p>在tabs 的bindings里加载其他页面</p><p> <a href="E:\CoreCode\GS\XDS\xmshop\lib\app\modules\tabs\bindings\tabs_binding.dart">tabs_binding.dart</a> </p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:get/get.dart&#x27;</span>;<br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;../controllers/tabs_controller.dart&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;../../home/controllers/home_controller.dart&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;../../category/controllers/category_controller.dart&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;../../give/controllers/give_controller.dart&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;../../cart/controllers/cart_controller.dart&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;../../user/controllers/user_controller.dart&#x27;</span>;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TabsBinding</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Bindings</span> </span>&#123;<br>  <span class="hljs-meta">@override</span><br>  <span class="hljs-keyword">void</span> dependencies() &#123;<br>    Get.lazyPut&lt;TabsController&gt;(<br>      () =&gt; TabsController(),<br>    );<br>    Get.lazyPut&lt;HomeController&gt;(<br>      () =&gt; HomeController(),<br>    );<br>    Get.lazyPut&lt;CategoryController&gt;(<br>      () =&gt; CategoryController(),<br>    );<br>    Get.lazyPut&lt;GiveController&gt;(<br>      () =&gt; GiveController(),<br>    );<br>    Get.lazyPut&lt;CartController&gt;(<br>      () =&gt; CartController(),<br>    );<br>    Get.lazyPut&lt;UserController&gt;(<br>      () =&gt; UserController(),<br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ol><h2 id="配置tab切换"><a href="#配置tab切换" class="headerlink" title="配置tab切换"></a>配置tab切换</h2><p>   bottomNavigationBar</p>   <figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter/material.dart&#x27;</span>;<br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:get/get.dart&#x27;</span>;<br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;../controllers/tabs_controller.dart&#x27;</span>;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TabsView</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">GetView</span>&lt;<span class="hljs-title">TabsController</span>&gt; </span>&#123;<br>  <span class="hljs-keyword">const</span> TabsView(&#123;Key? key&#125;) : <span class="hljs-keyword">super</span>(key: key);<br><br>  <span class="hljs-meta">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class="hljs-keyword">return</span> Obx(() =&gt; Scaffold(<br>          appBar: AppBar(<br>            title: <span class="hljs-keyword">const</span> Text(<span class="hljs-string">&#x27;TabsView&#x27;</span>),<br>            centerTitle: <span class="hljs-keyword">true</span>,<br>          ),<br>          body: Text(<span class="hljs-string">&quot;tab&quot;</span>),<br>          bottomNavigationBar: BottomNavigationBar(<br>            fixedColor: Colors.red,<br>            currentIndex: controller.currentIndex.value,<br>            type: BottomNavigationBarType.fixed,<br>            onTap: (index) &#123;<br>              controller.setCurrentIndex(index);<br>            &#125;,<br>            items: <span class="hljs-keyword">const</span> [<br>              BottomNavigationBarItem(<br>                icon: Icon(Icons.home),<br>                label: <span class="hljs-string">&quot;首页&quot;</span>,<br>              ),<br>              BottomNavigationBarItem(<br>                icon: Icon(Icons.category),<br>                label: <span class="hljs-string">&quot;分类&quot;</span>,<br>              ),<br>              BottomNavigationBarItem(<br>                icon: Icon(Icons.room_service),<br>                label: <span class="hljs-string">&quot;服务&quot;</span>,<br>              ),<br>              BottomNavigationBarItem(<br>                icon: Icon(Icons.shopping_cart),<br>                label: <span class="hljs-string">&quot;购物车&quot;</span>,<br>              ),<br>              BottomNavigationBarItem(<br>                icon: Icon(Icons.people),<br>                label: <span class="hljs-string">&quot;我的&quot;</span>,<br>              )<br>            ],<br>          ),<br>        ));<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>   <figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:get/get.dart&#x27;</span>;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TabsController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">GetxController</span> </span>&#123;<br>  RxInt currentIndex = <span class="hljs-number">0.</span>obs;<br><br>  <span class="hljs-meta">@override</span><br>  <span class="hljs-keyword">void</span> onInit() &#123;<br>    <span class="hljs-keyword">super</span>.onInit();<br>  &#125;<br><br>  <span class="hljs-meta">@override</span><br>  <span class="hljs-keyword">void</span> onClose() &#123;<br>    <span class="hljs-keyword">super</span>.onClose();<br>  &#125;<br><br>  <span class="hljs-keyword">void</span> setCurrentIndex(index) &#123;<br>    currentIndex.value = index;<br>    update();<br>  &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="切换页面"><a href="#切换页面" class="headerlink" title="切换页面"></a>切换页面</h2>   <figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter/material.dart&#x27;</span>;<br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:get/get.dart&#x27;</span>;<br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;../controllers/tabs_controller.dart&#x27;</span>;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TabsView</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">GetView</span>&lt;<span class="hljs-title">TabsController</span>&gt; </span>&#123;<br>  <span class="hljs-keyword">const</span> TabsView(&#123;<span class="hljs-keyword">super</span>.key&#125;);<br><br>  <span class="hljs-meta">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class="hljs-keyword">return</span> Obx(() =&gt; Scaffold(<br>          <span class="hljs-comment">// 简单切换页面</span><br>          <span class="hljs-comment">// body: controller.pages[controller.currentIndex.value],</span><br>          <span class="hljs-comment">// 可左右滑动切换</span><br>          body: PageView(<br>            controller: controller.pageController,<br>            children: controller.pages,<br>            onPageChanged: (index) &#123;<br>              controller.setCurrentIndex(index);<br>            &#125;,<br>          ),<br>          bottomNavigationBar: BottomNavigationBar(<br>            fixedColor: Colors.red,<br>            currentIndex: controller.currentIndex.value,<br>            type: BottomNavigationBarType.fixed,<br>            onTap: (index) &#123;<br>              controller.setCurrentIndex(index);<br>              controller.pageController.jumpToPage(index);<br>            &#125;,<br>            items: <span class="hljs-keyword">const</span> [<br>              BottomNavigationBarItem(<br>                icon: Icon(Icons.home),<br>                label: <span class="hljs-string">&quot;首页&quot;</span>,<br>              ),<br>              BottomNavigationBarItem(<br>                icon: Icon(Icons.category),<br>                label: <span class="hljs-string">&quot;分类&quot;</span>,<br>              ),<br>              BottomNavigationBarItem(<br>                icon: Icon(Icons.room_service),<br>                label: <span class="hljs-string">&quot;服务&quot;</span>,<br>              ),<br>              BottomNavigationBarItem(<br>                icon: Icon(Icons.shopping_cart),<br>                label: <span class="hljs-string">&quot;购物车&quot;</span>,<br>              ),<br>              BottomNavigationBarItem(<br>                icon: Icon(Icons.people),<br>                label: <span class="hljs-string">&quot;我的&quot;</span>,<br>              )<br>            ],<br>          ),<br>        ));<br>  &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>   <figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter/material.dart&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:get/get.dart&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;../../cart/views/cart_view.dart&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;../../category/views/category_view.dart&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;../../give/views/give_view.dart&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;../../home/views/home_view.dart&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;../../user/views/user_view.dart&#x27;</span>;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TabsController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">GetxController</span> </span>&#123;<br>  <span class="hljs-comment">// 当前选中tab的索引</span><br>  RxInt currentIndex = <span class="hljs-number">0.</span>obs;<br><br>  <span class="hljs-comment">// 页面列表</span><br>  <span class="hljs-keyword">final</span> <span class="hljs-built_in">List</span>&lt;Widget&gt; pages = <span class="hljs-keyword">const</span> [<br>    HomeView(),<br>    CategoryView(),<br>    GiveView(),<br>    UserView(),<br>    CartView()<br>  ];<br><br>  PageController pageController = PageController(initialPage: <span class="hljs-number">0</span>);<br><br>  <span class="hljs-keyword">void</span> setCurrentIndex(index) &#123;<br>    currentIndex.value = index;<br>    update();<br>  &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>   <figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter/material.dart&#x27;</span>;<br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:get/get.dart&#x27;</span>;<br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;../controllers/home_controller.dart&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;../../../services/keepAliveWrapper.dart&#x27;</span>;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HomeView</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">GetView</span>&lt;<span class="hljs-title">HomeController</span>&gt; </span>&#123;<br>  <span class="hljs-keyword">const</span> HomeView(&#123;<span class="hljs-keyword">super</span>.key&#125;);<br><br>  <span class="hljs-meta">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class="hljs-comment">// 页面缓存</span><br>    <span class="hljs-keyword">return</span> KeepAliveWrapper(<br>        child: Scaffold(<br>            appBar: AppBar(<br>              title: <span class="hljs-keyword">const</span> Text(<span class="hljs-string">&#x27;HomeView&#x27;</span>),<br>              centerTitle: <span class="hljs-keyword">true</span>,<br>            ),<br>            body: ListView(<br>              children: <span class="hljs-keyword">const</span> [<br>                ListTile(<br>                  title: Text(<span class="hljs-string">&#x27;111111111111&#x27;</span>),<br>                ),<br>                ListTile(<br>                  title: Text(<span class="hljs-string">&#x27;111111111111&#x27;</span>),<br>                ),<br>                ListTile(<br>                  title: Text(<span class="hljs-string">&#x27;111111111111&#x27;</span>),<br>                ),<br>                ListTile(<br>                  title: Text(<span class="hljs-string">&#x27;111111111111&#x27;</span>),<br>                ),<br>                ListTile(<br>                  title: Text(<span class="hljs-string">&#x27;111111111111&#x27;</span>),<br>                ),<br>                ListTile(<br>                  title: Text(<span class="hljs-string">&#x27;111111111111&#x27;</span>),<br>                ),<br>                ListTile(<br>                  title: Text(<span class="hljs-string">&#x27;111111111111&#x27;</span>),<br>                ),<br>                ListTile(<br>                  title: Text(<span class="hljs-string">&#x27;111111111111&#x27;</span>),<br>                ),<br>                ListTile(<br>                  title: Text(<span class="hljs-string">&#x27;111111111111&#x27;</span>),<br>                ),<br>                ListTile(<br>                  title: Text(<span class="hljs-string">&#x27;111111111111&#x27;</span>),<br>                ),<br>                ListTile(<br>                  title: Text(<span class="hljs-string">&#x27;111111111111&#x27;</span>),<br>                ),<br>                ListTile(<br>                  title: Text(<span class="hljs-string">&#x27;111111111111&#x27;</span>),<br>                ),<br>                ListTile(<br>                  title: Text(<span class="hljs-string">&#x27;111111111111&#x27;</span>),<br>                ),<br>                ListTile(<br>                  title: Text(<span class="hljs-string">&#x27;111111111111&#x27;</span>),<br>                ),<br>                ListTile(<br>                  title: Text(<span class="hljs-string">&#x27;111111111111&#x27;</span>),<br>                ),<br>                ListTile(<br>                  title: Text(<span class="hljs-string">&#x27;111111111111&#x27;</span>),<br>                ),<br>                ListTile(<br>                  title: Text(<span class="hljs-string">&#x27;111111111111&#x27;</span>),<br>                ),<br>                ListTile(<br>                  title: Text(<span class="hljs-string">&#x27;111111111111&#x27;</span>),<br>                ),<br>                ListTile(<br>                  title: Text(<span class="hljs-string">&#x27;111111111111&#x27;</span>),<br>                ),<br>                ListTile(<br>                  title: Text(<span class="hljs-string">&#x27;111111111111&#x27;</span>),<br>                ),<br>                ListTile(<br>                  title: Text(<span class="hljs-string">&#x27;111111111111&#x27;</span>),<br>                ),<br>                ListTile(<br>                  title: Text(<span class="hljs-string">&#x27;111111111111&#x27;</span>),<br>                ),<br>                ListTile(<br>                  title: Text(<span class="hljs-string">&#x27;2222&#x27;</span>),<br>                ),<br>                ListTile(<br>                  title: Text(<span class="hljs-string">&#x27;567567567566666666666666666666&#x27;</span>),<br>                ),<br>                ListTile(<br>                  title: Text(<span class="hljs-string">&#x27;567567567&#x27;</span>),<br>                ),<br>                ListTile(<br>                  title: Text(<span class="hljs-string">&#x27;5675675667567&#x27;</span>),<br>                ),<br>                ListTile(<br>                  title: Text(<span class="hljs-string">&#x27;111111111111&#x27;</span>),<br>                ),<br>                ListTile(<br>                  title: Text(<span class="hljs-string">&#x27;111111111111&#x27;</span>),<br>                ),<br>              ],<br>            )));<br>  &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>   <figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter/material.dart&#x27;</span>;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">KeepAliveWrapper</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatefulWidget</span> </span>&#123;<br>  <span class="hljs-keyword">const</span> KeepAliveWrapper(<br>      &#123;<span class="hljs-keyword">super</span>.key, <span class="hljs-meta">@required</span> <span class="hljs-keyword">this</span>.child, <span class="hljs-keyword">this</span>.keepAlive = <span class="hljs-keyword">true</span>&#125;);<br><br>  <span class="hljs-keyword">final</span> Widget? child;<br>  <span class="hljs-keyword">final</span> <span class="hljs-built_in">bool</span> keepAlive;<br><br>  <span class="hljs-meta">@override</span><br>  State&lt;KeepAliveWrapper&gt; createState() =&gt; _KeepAliveWrapperState();<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">_KeepAliveWrapperState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">State</span>&lt;<span class="hljs-title">KeepAliveWrapper</span>&gt;</span><br><span class="hljs-class">    <span class="hljs-title">with</span> <span class="hljs-title">AutomaticKeepAliveClientMixin</span> </span>&#123;<br>  <span class="hljs-meta">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class="hljs-keyword">return</span> widget.child!;<br>  &#125;<br><br>  <span class="hljs-meta">@override</span><br>  <span class="hljs-built_in">bool</span> <span class="hljs-keyword">get</span> wantKeepAlive =&gt; widget.keepAlive;<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="不同终端屏幕适配"><a href="#不同终端屏幕适配" class="headerlink" title="不同终端屏幕适配"></a>不同终端屏幕适配</h2><p><a href="https://pub.dev/packages/flutter_screenutil">https://pub.dev/packages/flutter_screenutil</a></p><p><a href="https://github.com/OpenFlutter/flutter_screenutil/blob/master/README_CN.md">https://github.com/OpenFlutter/flutter_screenutil/blob/master/README_CN.md</a></p><p>pubspec.yaml</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">dependencies:</span><br><span class="hljs-symbol">  flutter:</span><br><span class="hljs-symbol">    sdk:</span> flutter<br>  <span class="hljs-meta"># add flutter_screenutil</span><br><span class="hljs-symbol">  flutter_screenutil:</span> ^<span class="hljs-number">5.9</span><span class="hljs-number">.3</span><br></code></pre></td></tr></table></figure><p>使用的地方引入</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arcade"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter_screenutil/flutter_screenutil.dart&#x27;</span>;<br></code></pre></td></tr></table></figure><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">void</span> main() =&gt; runApp(MyApp());<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyApp</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>&#123;<br>  <span class="hljs-meta">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class="hljs-comment">//填入设计稿中设备的屏幕尺寸,单位dp</span><br>    <span class="hljs-keyword">return</span> ScreenUtilInit(<br>      designSize: <span class="hljs-keyword">const</span> Size(<span class="hljs-number">360</span>, <span class="hljs-number">690</span>),<br>      minTextAdapt: <span class="hljs-keyword">true</span>,<br>      splitScreenMode: <span class="hljs-keyword">true</span>,<br>      builder: (context , child) &#123;<br>        <span class="hljs-keyword">return</span> MaterialApp(<br>          debugShowCheckedModeBanner: <span class="hljs-keyword">false</span>,<br>          title: <span class="hljs-string">&#x27;First Method&#x27;</span>,<br>          <span class="hljs-comment">// You can use the library anywhere in the app even in theme</span><br>          theme: ThemeData(<br>            primarySwatch: Colors.blue,<br>            textTheme: Typography.englishLike2018.apply(fontSizeFactor: <span class="hljs-number">1.</span>sp),<br>          ),<br>          home: child,<br>        );<br>      &#125;,<br>      child: <span class="hljs-keyword">const</span> HomePage(title: <span class="hljs-string">&#x27;First Method&#x27;</span>),<br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="封装screenutil"><a href="#封装screenutil" class="headerlink" title="封装screenutil"></a>封装screenutil</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter_screenutil/flutter_screenutil.dart&#x27;</span>;<br><br><span class="hljs-comment">/// <span class="language-markdown">屏幕适配</span></span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ScreenAdapter</span> </span>&#123;<br>  <span class="hljs-comment">/// <span class="language-markdown">获取对象的高度属性</span></span><br>  <span class="hljs-keyword">static</span> height(<span class="hljs-built_in">num</span> v) &#123;<br>    <span class="hljs-keyword">return</span> v.h;<br>  &#125;<br><br>  <span class="hljs-comment">/// <span class="language-markdown">获取对象的宽度属性</span></span><br>  <span class="hljs-keyword">static</span> width(<span class="hljs-built_in">num</span> v) &#123;<br>    <span class="hljs-keyword">return</span> v.w;<br>  &#125;<br><br>  <span class="hljs-comment">/// <span class="language-markdown">获取对象的字体大小属性</span></span><br>  <span class="hljs-keyword">static</span> fontSize(<span class="hljs-built_in">num</span> v) &#123;<br>    <span class="hljs-keyword">return</span> v.sp;<br>  &#125;<br><br>  <span class="hljs-comment">/// <span class="language-markdown">获取屏幕宽度</span></span><br>  <span class="hljs-keyword">static</span> getScreenWidth() &#123;<br>    <span class="hljs-comment">// return ScreenUtil().screenWidth;</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1.</span>sw;<br>  &#125;<br><br>  <span class="hljs-comment">/// <span class="language-markdown">获取屏幕高度</span></span><br>  <span class="hljs-keyword">static</span> getScreenHeight() &#123;<br>    <span class="hljs-comment">// return ScreenUtil().screenHeight;</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1.</span>sh;<br>  &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="透明状态栏"><a href="#透明状态栏" class="headerlink" title="透明状态栏"></a>透明状态栏</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-comment">// 配置透明的状态栏</span><br>SystemUiOverlayStyle systemUiOverlayStyle =<br>    <span class="hljs-keyword">const</span> SystemUiOverlayStyle(statusBarColor: Colors.transparent);<br>SystemChrome.setSystemUIOverlayStyle(systemUiOverlayStyle);<br></code></pre></td></tr></table></figure><h2 id="透明顶部导航-上下滑动切换动画"><a href="#透明顶部导航-上下滑动切换动画" class="headerlink" title="透明顶部导航 &amp; 上下滑动切换动画"></a>透明顶部导航 &amp; 上下滑动切换动画</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-comment">// home_view.dart</span><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter/material.dart&#x27;</span>;<br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:get/get.dart&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:xmshop/app/services/hyIcon.dart&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:xmshop/app/services/screenAdapter.dart&#x27;</span>;<br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;../controllers/home_controller.dart&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;../../../services/keepAliveWrapper.dart&#x27;</span>;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HomeView</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">GetView</span>&lt;<span class="hljs-title">HomeController</span>&gt; </span>&#123;<br>  <span class="hljs-keyword">const</span> HomeView(&#123;<span class="hljs-keyword">super</span>.key&#125;);<br><br>  <span class="hljs-meta">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class="hljs-comment">// 页面缓存</span><br>    <span class="hljs-keyword">return</span> KeepAliveWrapper(<br>        child: Scaffold(<br>            body: Stack(children: [<br>      ListView.builder(<br>          controller: controller.scrollController, <span class="hljs-comment">// 绑定控制器</span><br>          itemCount: <span class="hljs-number">20</span>,<br>          itemBuilder: (context, index) &#123;<br>            <span class="hljs-keyword">if</span> (index == <span class="hljs-number">0</span>) &#123;<br>              <span class="hljs-keyword">return</span> SizedBox(<br>                width: ScreenAdapter.width(<span class="hljs-number">1080</span>),<br>                height: ScreenAdapter.height(<span class="hljs-number">682</span>),<br>                child: Image.network(<br>                  <span class="hljs-string">&quot;https://www.itying.com/images/focus/focus02.png&quot;</span>,<br>                  fit: BoxFit.cover,<br>                ),<br>              );<br>            &#125;<br>            <span class="hljs-keyword">return</span> ListTile(title: Text(<span class="hljs-string">&#x27;第<span class="hljs-subst">$index</span>个元素&#x27;</span>));<br>          &#125;),<br>      Positioned(<br>          top: <span class="hljs-number">0</span>,<br>          left: <span class="hljs-number">0</span>,<br>          right: <span class="hljs-number">0</span>,<br>          child: Obx(() =&gt; AppBar(<br>                leading: controller.flag.value<br>                    ? <span class="hljs-keyword">const</span> Text(<span class="hljs-string">&quot;&quot;</span>)<br>                    : <span class="hljs-keyword">const</span> Icon(<br>                        HyIcon.xiaomi,<br>                        color: Colors.white,<br>                      ),<br>                <span class="hljs-comment">// leading 宽度</span><br>                leadingWidth:<br>                    controller.flag.value ? <span class="hljs-number">10</span> : ScreenAdapter.width(<span class="hljs-number">140</span>),<br>                <span class="hljs-comment">// 动画容器</span><br>                title: AnimatedContainer(<br>                  <span class="hljs-comment">// 改变宽度</span><br>                  width: controller.flag.value<br>                      ? ScreenAdapter.width(<span class="hljs-number">800</span>)<br>                      : ScreenAdapter.width(<span class="hljs-number">620</span>),<br>                  height: ScreenAdapter.height(<span class="hljs-number">96</span>),<br>                  decoration: BoxDecoration(<br>                      color: <span class="hljs-keyword">const</span> Color.fromARGB(<span class="hljs-number">200</span>, <span class="hljs-number">241</span>, <span class="hljs-number">236</span>, <span class="hljs-number">225</span>),<br>                      borderRadius:<br>                          BorderRadius.circular(ScreenAdapter.width(<span class="hljs-number">50</span>))),<br>                  duration: <span class="hljs-keyword">const</span> <span class="hljs-built_in">Duration</span>(milliseconds: <span class="hljs-number">300</span>),<br>                  child: Row(<br>                    crossAxisAlignment: CrossAxisAlignment.center,<br>                    children: [<br>                      Padding(<br>                        padding: EdgeInsets.fromLTRB(ScreenAdapter.width(<span class="hljs-number">34</span>), <span class="hljs-number">0</span>,<br>                            ScreenAdapter.width(<span class="hljs-number">10</span>), <span class="hljs-number">0</span>),<br>                        child: Icon(<br>                          Icons.search,<br>                          size: ScreenAdapter.fontSize(<span class="hljs-number">40</span>),<br>                        ),<br>                      ),<br>                      Text(<br>                        <span class="hljs-string">&quot;手机&quot;</span>,<br>                        style: TextStyle(<br>                            fontSize: ScreenAdapter.fontSize(<span class="hljs-number">32</span>),<br>                            color: Colors.black54),<br>                      )<br>                    ],<br>                  ),<br>                ),<br>                centerTitle: <span class="hljs-keyword">true</span>,<br>                backgroundColor:<br>                    controller.flag.value ? Colors.white : Colors.transparent,<br>                elevation: <span class="hljs-number">0</span>,<br>                actions: [<br>                  IconButton(<br>                      onPressed: () &#123;<br>                        Get.toNamed(<span class="hljs-string">&#x27;/cart&#x27;</span>);<br>                      &#125;,<br>                      icon: Icon(<br>                        Icons.qr_code,<br>                        color: controller.flag.value<br>                            ? Colors.black87<br>                            : Colors.white,<br>                      )),<br>                  IconButton(<br>                      onPressed: () &#123;<br>                        Get.toNamed(<span class="hljs-string">&#x27;/cart&#x27;</span>);<br>                      &#125;,<br>                      icon: Icon(<br>                        Icons.message,<br>                        color: controller.flag.value<br>                            ? Colors.black87<br>                            : Colors.white,<br>                      ))<br>                ],<br>              )))<br>    ])));<br>  &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-comment">// home_controller.dart</span><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter/material.dart&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:get/get.dart&#x27;</span>;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HomeController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">GetxController</span> </span>&#123;<br>  <span class="hljs-comment">// 滚动条控制器</span><br>  <span class="hljs-keyword">final</span> ScrollController scrollController = ScrollController();<br><br>  <span class="hljs-comment">// 开关</span><br>  <span class="hljs-keyword">final</span> RxBool flag = <span class="hljs-keyword">false</span>.obs;<br><br>  <span class="hljs-meta">@override</span><br>  <span class="hljs-keyword">void</span> onInit() &#123;<br>    <span class="hljs-keyword">super</span>.onInit();<br>    <span class="hljs-comment">// 监听滚动条滚动</span><br>    scrollController.addListener(() &#123;<br>      <span class="hljs-comment">// 下拉高度大于10时，显示返回顶部按钮</span><br>      <span class="hljs-keyword">final</span> pixels = scrollController.position.pixels;<br>      <span class="hljs-comment">// 根据滚动位置更新 flag 值</span><br>      <span class="hljs-keyword">if</span> (pixels &gt;= <span class="hljs-number">10</span> &amp;&amp; !flag.value) &#123;<br>        flag.value = <span class="hljs-keyword">true</span>;<br>        update(); <span class="hljs-comment">// 显示返回顶部按钮</span><br>      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (pixels &lt; <span class="hljs-number">10</span> &amp;&amp; flag.value) &#123;<br>        flag.value = <span class="hljs-keyword">false</span>;<br>        update(); <span class="hljs-comment">// 隐藏返回顶部按钮</span><br>      &#125;<br>    &#125;);<br>  &#125;<br><br>  <span class="hljs-meta">@override</span><br>  <span class="hljs-keyword">void</span> onReady() &#123;<br>    <span class="hljs-keyword">super</span>.onReady();<br>  &#125;<br><br>  <span class="hljs-meta">@override</span><br>  <span class="hljs-keyword">void</span> onClose() &#123;<br>    <span class="hljs-keyword">super</span>.onClose();<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="轮播图"><a href="#轮播图" class="headerlink" title="轮播图"></a>轮播图</h2><h3 id="swiper-插件"><a href="#swiper-插件" class="headerlink" title="swiper 插件"></a>swiper 插件</h3><p><a href="https://pub.dev/packages/flutter_swiper_view">https://pub.dev/packages/flutter_swiper_view</a></p><p><a href="https://github.com/feicien/flutter_swiper_view/blob/master/README-ZH.md">https://github.com/feicien/flutter_swiper_view/blob/master/README-ZH.md</a></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">dependencies:</span> <br>  <span class="hljs-attr">flutter_swiper_view:</span> <span class="hljs-string">^1.1.8</span><br></code></pre></td></tr></table></figure><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter/material.dart&#x27;</span>;<br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter_swiper_view/flutter_swiper_view.dart&#x27;</span>;<br><br><span class="hljs-keyword">void</span> main() =&gt; runApp(<span class="hljs-keyword">const</span> MyApp());<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyApp</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>&#123;<br>  <span class="hljs-keyword">const</span> MyApp(&#123;Key? key&#125;) : <span class="hljs-keyword">super</span>(key: key);<br><br>  <span class="hljs-meta">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class="hljs-keyword">return</span> MaterialApp(<br>      title: <span class="hljs-string">&#x27;Flutter Demo&#x27;</span>,<br>      theme: ThemeData(<br>        primarySwatch: Colors.blue,<br>      ),<br>      home: <span class="hljs-keyword">const</span> MyHomePage(title: <span class="hljs-string">&#x27;Flutter Demo Home Page&#x27;</span>),<br>    );<br>  &#125;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyHomePage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatefulWidget</span> </span>&#123;<br>  <span class="hljs-keyword">const</span> MyHomePage(&#123;Key? key, <span class="hljs-keyword">required</span> <span class="hljs-keyword">this</span>.title&#125;) : <span class="hljs-keyword">super</span>(key: key);<br><br>  <span class="hljs-keyword">final</span> <span class="hljs-built_in">String</span> title;<br><br>  <span class="hljs-meta">@override</span><br>  State&lt;MyHomePage&gt; createState() =&gt; _MyHomePageState();<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">_MyHomePageState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">State</span>&lt;<span class="hljs-title">MyHomePage</span>&gt; </span>&#123;<br><br>  <span class="hljs-meta">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class="hljs-keyword">return</span> Scaffold(<br>      appBar: AppBar(<br>        title: Text(widget.title),<br>      ),<br>      body: Swiper(<br>        itemBuilder: (context, index)&#123;<br>          <span class="hljs-keyword">return</span> Image.network(<span class="hljs-string">&quot;https://via.placeholder.com/350x150&quot;</span>,fit: BoxFit.fill,);<br>        &#125;,<br>        itemCount: <span class="hljs-number">3</span>,<br>        pagination: <span class="hljs-keyword">const</span> SwiperPagination(),<br>        control: <span class="hljs-keyword">const</span> SwiperControl(),<br>      ),<br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="Dio-网络请求"><a href="#Dio-网络请求" class="headerlink" title="Dio 网络请求"></a>Dio 网络请求</h3><p><a href="https://pub.dev/packages/dio">https://pub.dev/packages/dio</a></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">dependencies:</span> <br>  <span class="hljs-attr">dio:</span> <span class="hljs-string">^5.5.0+1</span><br></code></pre></td></tr></table></figure><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-comment">/// <span class="language-markdown">内容区域</span></span><br> Widget _homePage() &#123;<br>   <span class="hljs-keyword">return</span> Positioned(<br>       top: <span class="hljs-number">-40</span>,<br>       left: <span class="hljs-number">0</span>,<br>       right: <span class="hljs-number">0</span>,<br>       bottom: <span class="hljs-number">0</span>,<br>       <span class="hljs-comment">// https://www.itying.com/images/focus/focus02.png</span><br>       child: ListView(<br>         controller: controller.scrollController,<br>         children: [<br>           SizedBox(<br>             width: ScreenAdapter.getScreenWidth(),<br>             height: ScreenAdapter.height(<span class="hljs-number">682</span>),<br>             child: Obx(() =&gt; Swiper(<br>                   itemBuilder: (context, index) &#123;<br>                     <span class="hljs-built_in">String</span> picUrl =<br>                         <span class="hljs-string">&quot;https://miapp.itying.com/<span class="hljs-subst">$&#123;controller.swiperList[index][<span class="hljs-string">&#x27;pic&#x27;</span>]&#125;</span>&quot;</span>;<br>                     <span class="hljs-keyword">return</span> Image.network(<br>                       picUrl.replaceAll(<span class="hljs-string">&quot;\\&quot;</span>, <span class="hljs-string">&quot;/&quot;</span>),<br>                       fit: BoxFit.fill,<br>                     );<br>                   &#125;,<br>                   itemCount: controller.swiperList.length,<br><br>                   pagination:<br>                       <span class="hljs-keyword">const</span> SwiperPagination(builder: SwiperPagination.rect),<br>                   <span class="hljs-comment">// 自动轮播</span><br>                   autoplay: <span class="hljs-keyword">true</span>,<br>                   <span class="hljs-comment">// 循环轮播</span><br>                   loop: <span class="hljs-keyword">true</span>,<br>                   <span class="hljs-comment">// 动画切换时间</span><br>                   duration: <span class="hljs-number">2000</span>,<br>                 )),<br>           )<br>         ],<br>       ));<br> &#125;<br></code></pre></td></tr></table></figure><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-comment">// controller</span><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter/material.dart&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:get/get.dart&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:dio/dio.dart&#x27;</span>;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HomeController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">GetxController</span> </span>&#123;<br>  <span class="hljs-comment">// 滚动条控制器</span><br>  <span class="hljs-keyword">final</span> ScrollController scrollController = ScrollController();<br><br>  <span class="hljs-comment">// 浮动导航开关</span><br>  <span class="hljs-keyword">final</span> RxBool flag = <span class="hljs-keyword">false</span>.obs;<br><br>  <span class="hljs-comment">// https://miapp.itying.com/api/focus</span><br>  RxList swiperList = [].obs;<br><br>  <span class="hljs-meta">@override</span><br>  <span class="hljs-keyword">void</span> onInit() &#123;<br>    <span class="hljs-keyword">super</span>.onInit();<br>    <span class="hljs-comment">// 监听滚动条滚动</span><br>    scrollControllerListener();<br>    <span class="hljs-comment">// 获取焦点数据</span><br>    getFocusData();<br>  &#125;<br><br>  <span class="hljs-comment">/// <span class="language-markdown">监听滚动条滚动</span></span><br>  scrollControllerListener() &#123;<br>    scrollController.addListener(() &#123;<br>      <span class="hljs-comment">// 下拉高度大于10时，显示返回顶部按钮</span><br>      <span class="hljs-keyword">final</span> pixels = scrollController.position.pixels;<br>      <span class="hljs-comment">// 根据滚动位置更新 flag 值</span><br>      <span class="hljs-keyword">if</span> (pixels &gt;= <span class="hljs-number">10</span> &amp;&amp; !flag.value) &#123;<br>        flag.value = <span class="hljs-keyword">true</span>;<br>        update(); <span class="hljs-comment">// 显示返回顶部按钮</span><br>      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (pixels &lt; <span class="hljs-number">10</span> &amp;&amp; flag.value) &#123;<br>        flag.value = <span class="hljs-keyword">false</span>;<br>        update(); <span class="hljs-comment">// 隐藏返回顶部按钮</span><br>      &#125;<br>    &#125;);<br>  &#125;<br><br>  <span class="hljs-comment">/// <span class="language-markdown">获取焦点数据</span></span><br>  getFocusData() <span class="hljs-keyword">async</span> &#123;<br>    <span class="hljs-keyword">var</span> response = <span class="hljs-keyword">await</span> Dio().<span class="hljs-keyword">get</span>(<span class="hljs-string">&quot;https://miapp.itying.com/api/focus&quot;</span>);<br>    swiperList.value = response.data[<span class="hljs-string">&quot;result&quot;</span>];<br>    update();<br>  &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="模型类"><a href="#模型类" class="headerlink" title="模型类"></a>模型类</h2>]]></content>
    
    
    <categories>
      
      <category>前端</category>
      
      <category>Flutter</category>
      
      <category>Dart</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Flutter</tag>
      
      <tag>Getx</tag>
      
      <tag>Dio</tag>
      
      <tag>flutter_screenutil</tag>
      
      <tag>flutter_swiper_view</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hexo Fluid 文章</title>
    <link href="/posts/34482/"/>
    <url>/posts/34482/</url>
    
    <content type="html"><![CDATA[<h2 id="测试发布文章"><a href="#测试发布文章" class="headerlink" title="测试发布文章"></a>测试发布文章</h2><p><code>这是一篇测试发布文章。</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">quick_sort</span>(<span class="hljs-params">arr</span>):<br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(arr) &lt;= <span class="hljs-number">1</span>:<br>        <span class="hljs-keyword">return</span> arr<br>    pivot = arr[<span class="hljs-number">0</span>]<br>    left = []<br>    right = []<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-built_in">len</span>(arr)):<br>        <span class="hljs-keyword">if</span> arr[i] &lt; pivot:<br>            left.append(arr[i])<br>        <span class="hljs-keyword">else</span>:<br>            right.append(arr[i])<br>    <span class="hljs-keyword">return</span> quick_sort(left) + [pivot] + quick_sort(right)<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>前端</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Hexo</tag>
      
      <tag>Fluid</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
